<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>GF Recipe Converter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 40px;
    }
    h2 {
      margin-top: 30px;
    }
    .section {
      margin-bottom: 20px;
    }
    button {
      padding: 10px 18px;
      font-size: 16px;
      cursor: pointer;
    }
    textarea {
      width: 100%;
      font-size: 14px;
    }
    pre {
      white-space: pre-wrap;
      margin-top: 20px;
      background: #f6f6f6;
      padding: 16px;
    }
  </style>
</head>

<body>

<h1>GF Recipe Converter</h1>

<!-- SECTION 1 -->
<div class="section">
  <h2>1. What do you want your recipe to be?</h2>

  <label><input type="checkbox" id="pref_easy"> Easy</label><br>
  <label><input type="checkbox" id="pref_quick"> Quick</label><br>
  <label><input type="checkbox" id="pref_high_protein"> High-protein</label><br>
  <label><input type="checkbox" id="pref_light"> Light & fresh</label><br>
  <label><input type="checkbox" id="pref_budget"> Budget-friendly</label><br>
</div>

<!-- SECTION 2 -->
<div class="section">
  <h2>2. Any dietary restrictions?</h2>

  <label><input type="checkbox" id="pref_vegetarian"> Vegetarian</label><br>
  <label><input type="checkbox" id="pref_vegan"> Vegan</label><br>
  <label><input type="checkbox" id="pref_gluten_free"> Gluten-free</label><br>
  <label><input type="checkbox" id="pref_dairy_free"> Dairy-free</label><br>
  <label><input type="checkbox" id="pref_nut_free"> Nut-free</label><br>
</div>

<!-- SECTION 3 -->
<div class="section">
  <h2>3. How do you cook?</h2>

  <label><input type="radio" name="skill" value="learning" checked> I’m learning</label><br>
  <label><input type="radio" name="skill" value="basics"> I can handle basics</label><br>
  <label><input type="radio" name="skill" value="good"> I’m pretty good</label><br>
  <label><input type="radio" name="skill" value="challenge"> Bring on the challenge</label>
</div>

<!-- RECIPE INPUT -->
<div class="section">
  <h2>Paste the recipe</h2>
  <textarea id="recipe" rows="12" placeholder="Paste recipe here"></textarea>
</div>

<button onclick="convert()">Convert</button>

<pre id="result"></pre>

<script>
async function convert() {
  const recipe = document.getElementById("recipe").value;
  const resultEl = document.getElementById("result");
  resultEl.textContent = "Converting…";

  const preferences = {
    easy: document.getElementById("pref_easy").checked,
    quick: document.getElementById("pref_quick").checked,
    highProtein: document.getElementById("pref_high_protein").checked,
    lightFresh: document.getElementById("pref_light").checked,
    budgetFriendly: document.getElementById("pref_budget").checked,

    vegetarian: document.getElementById("pref_vegetarian").checked,
    vegan: document.getElementById("pref_vegan").checked,
    glutenFree: document.getElementById("pref_gluten_free").checked,
    dairyFree: document.getElementById("pref_dairy_free").checked,
    nutFree: document.getElementById("pref_nut_free").checked,

    skillLevel: document.querySelector('input[name="skill"]:checked').value
  };

  try {
    const response = await fetch("https://vinst.app.n8n.cloud/webhook/gf-chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        recipe,
        preferences
      })
    });

    const text = await response.text();
    resultEl.textContent = text;
  } catch (e) {
    resultEl.textContent = "Something went wrong. Please try again.";
  }
}
</script>

</body>
</html>
